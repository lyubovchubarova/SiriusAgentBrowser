<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Sirius Agent</title>
		<style>
			:root {
				--input-bg: #ffffff;
    			--input-border: #dcdcdc;
    			--input-text: #1f1f1f;
    			--input-placeholder: #8a8a8a;
    			--user-text: #ffffff;
				--bg-main: #f5f5f5;
				--bg-panel: #ffffff;
				--text-main: #333;
				--agent-bg: #ffffff;
				--user-bg: #007aff;
				--thinking-bg: #e8e8e8;
				--border-color: #e0e0e0;
				--thinking-bg: #e8e8e8;
				--thinking-header-bg: #dcdcdc;
				--thinking-border: #d0d0d0;
				--thinking-text: #333;
				--scroll-track: #f0f0f0;
    			--scroll-thumb: #c0c0c0;
			}

			/* --- –¢–ï–ú–´ --- */

			/* DARK */
			[data-theme="dark"] {
				--bg-main: #1e1e1e;
				--bg-panel: #2a2a2a;
				--text-main: #e0e0e0;
				--agent-bg: #2f2f31;
				--user-bg: #0a84ff;
			}

			/* –ù–û–í–´–ô –ì–û–î (–ö—Ä–∞—Å–Ω–æ-–∑–µ–ª–µ–Ω–∞—è –≥–∞–º–º–∞) */
			[data-theme="new-year"] {
				--bg-main: #0a2e1c; /* –ì–ª—É–±–æ–∫–∏–π –∑–µ–ª–µ–Ω—ã–π */
				--bg-panel: #14452f;
				--text-main: #fff;
				--agent-bg: #1d5c41;
				--user-bg: #c41e3a; /* –†–æ–∂–¥–µ—Å—Ç–≤–µ–Ω—Å–∫–∏–π –∫—Ä–∞—Å–Ω—ã–π */
				--border-color: #2a7a5a;
			}

			/* 8 –ú–ê–†–¢–ê (–ù–µ–∂–Ω–æ-—Ä–æ–∑–æ–≤–∞—è –≥–∞–º–º–∞) */
			[data-theme="march-8"] {
				--bg-main: #fff0f5; 
				--bg-panel: #ffffff;
				--text-main: #5d3f4a;
				--agent-bg: #ffe4e1;
				--user-bg: #ff69b4;
				--border-color: #ffc0cb;
			}

			/* 23 –§–ï–í–†–ê–õ–Ø (–ú–∏–ª–∏—Ç–∞—Ä–∏/–°–∏–Ω–∏–π —Å—Ç–∏–ª—å) */
			[data-theme="feb-23"] {
				--bg-main: #2b302a;
				--bg-panel: #3c443b;
				--text-main: #e8e8e8;
				--agent-bg: #4a5448;
				--user-bg: #556b2f;
				--border-color: #6b8e23;
			}

			/* --- –°–¢–ò–õ–ò –ú–ï–ù–Æ --- */
			.theme-menu-container {
				position: relative;
				display: flex;
				flex-direction: row-reverse; /* –ú–µ–Ω—é –±—É–¥–µ—Ç —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å—Å—è –≤–ª–µ–≤–æ –æ—Ç –∫–Ω–æ–ø–∫–∏ */
				align-items: center;
			}

			.theme-options {
				display: none; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
				background: var(--bg-panel);
				border: 1px solid var(--border-color);
				padding: 5px;
				border-radius: 25px;
				margin-right: 10px;
				gap: 5px;
				box-shadow: 0 4px 15px rgba(0,0,0,0.2);
				animation: slideIn 0.2s ease;
			}

			.theme-options.active {
				display: flex;
			}

			.theme-opt {
				all: unset;
				cursor: pointer;
				font-size: 18px;
				width: 32px;
				height: 32px;
				display: flex;
				align-items: center;
				justify-content: center;
				border-radius: 50%;
				transition: background 0.2s;
			}

			.theme-opt:hover {
				background: rgba(0,0,0,0.1);
			}

			@keyframes slideIn {
				from { opacity: 0; transform: translateX(20px); }
				to { opacity: 1; transform: translateX(0); }
			}

			body {
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
					Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans",
					"Helvetica Neue", sans-serif;
				margin: 0;
				padding: 0;
				display: flex;
				flex-direction: column;
				height: 100vh;
				background-color: var(--bg-main);
    			color: var(--text-main);
				transition: background-color 0.3s ease, color 0.3s ease;
			}

			#chat-container {
				flex: 1;
				overflow-y: auto;
				padding: 15px;
				display: flex;
				flex-direction: column;
				gap: 10px;
				/* –î–æ–±–∞–≤–ª—è–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –º–µ—Å—Ç–æ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
				padding-top: 60px;
			}

			.message {
				max-width: 85%;
				padding: 10px 15px;
				border-radius: 15px;
				line-height: 1.4;
				font-size: 14px;
				word-wrap: break-word;
			}

			.user-message {
				align-self: flex-end;
				background-color: var(--user-bg);
				color: var(--user-text);
				border-bottom-right-radius: 5px;
			}

			.agent-message {
				align-self: flex-start;
				border-bottom-left-radius: 5px;
				box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
				background-color: var(--agent-bg);
    			color: var(--text-main);
			}

			.thinking-container {
				align-self: flex-start;
				border-radius: 8px;
				margin-bottom: 8px;
				max-width: 95%;
				overflow: hidden;
				display: flex;
				flex-direction: column;
				box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
				animation: fadeIn 0.3s ease-out;
				background-color: var(--thinking-bg);
    			border: 1px solid var(--thinking-border);
			}

			@keyframes fadeIn {
				from {
					opacity: 0;
					transform: translateY(5px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			.thinking-header {
				padding: 6px 10px;
				cursor: pointer;
				display: flex;
				justify-content: space-between;
				align-items: center;
				font-size: 11px;
				font-weight: 600;
				user-select: none;
				transition: background-color 0.2s;
    			color: var(--thinking-text);
				background-color: var(--thinking-header-bg);
			}

			.thinking-header:hover {
				background-color: rgba(255, 255, 255, 0.05);
			}

			.thinking-content {
				padding: 10px;
				font-family: "Consolas", "Monaco", "Courier New", monospace;
				font-size: 11px;
				line-height: 1.4;
				white-space: pre-wrap;
				word-wrap: break-word;
				display: block;
				max-height: 300px;
				overflow-y: auto;
				background-color: var(--thinking-bg);
    			color: var(--thinking-text);
			}

			.thinking-content.collapsed {
				display: none;
			}

			.thinking-content::after {
				content: "‚ñã";
				display: inline-block;
				vertical-align: bottom;
				animation: blink 1s step-start infinite;
				margin-left: 2px;
				font-size: 10px;
				color: var(--thinking-text);
    			opacity: 0.6;
			}

			@keyframes blink {
				50% {
					opacity: 0;
				}
			}

			.toggle-icon {
				transition: transform 0.2s;
				font-size: 10px;
			}

			.status-message {
				align-self: center;
				font-size: 12px;
				color: #888;
				margin: 5px 0;
			}

			#input-area {
				padding: 15px;
				display: flex;
				gap: 10px;
				background-color: var(--bg-panel);
    			border-top: 1px solid var(--border-color);
			}

			#prompt-input {
				flex: 1;
				padding: 10px;
				border-radius: 20px;
				outline: none;
				font-size: 14px;
				background-color: var(--input-bg);
    			color: var(--input-text);
    			border: 1px solid var(--input-border);
			}

			#prompt-input:focus {
				border-color: #007aff;
			}

			#prompt-input::placeholder {
				color: var(--input-placeholder);
			}

			#send-btn {
				background-color: #007aff;
				color: white;
				border: none;
				border-radius: 50%;
				width: 36px;
				height: 36px;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
			}

			#send-btn:disabled {
				background-color: #ccc;
				cursor: not-allowed;
			}

			#stop-btn {
				background-color: #ff3b30;
				color: white;
				border: none;
				border-radius: 50%;
				width: 36px;
				height: 36px;
				cursor: pointer;
				display: none; /* Hidden by default */
				align-items: center;
				justify-content: center;
			}

			#stop-btn svg {
				width: 16px;
				height: 16px;
				fill: white;
			}

			#send-btn svg {
				width: 16px;
				height: 16px;
				fill: white;
			}

			#mic-btn {
				background-color: transparent; /* –ò–ª–∏ var(--input-bg) –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Ñ–æ–Ω */
				color: #007aff;
				border: 1px solid var(--border-color); /* –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å */
				border: none;
				border-radius: 50%;
				width: 36px;
				height: 36px;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				margin-right: 5px; /* –û—Ç—Å—Ç—É–ø –æ—Ç –∏–Ω–ø—É—Ç–∞ */
				transition: all 0.2s;
			}

			#mic-btn svg {
				width: 20px;
				height: 20px;
				fill: #8a8a8a; /* –¶–≤–µ—Ç –∏–∫–æ–Ω–∫–∏ –≤ –ø–æ–∫–æ–µ */
			}

			#mic-btn:hover svg {
				fill: #007aff;
			}

			/* –°—Ç–∏–ª—å, –∫–æ–≥–¥–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω –∞–∫—Ç–∏–≤–µ–Ω (—Å–ª—É—à–∞–µ—Ç) */
			#mic-btn.listening {
				background-color: #ff3b30;
				animation: pulse 1.5s infinite;
			}

			#mic-btn.listening svg {
				fill: white;
			}

			@keyframes pulse {
				0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 59, 48, 0.7); }
				70% { transform: scale(1.1); box-shadow: 0 0 0 6px rgba(255, 59, 48, 0); }
				100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 59, 48, 0); }
			}
			
			::-webkit-scrollbar {
				width: 8px;
			}

			::-webkit-scrollbar-track {
				background: var(--scroll-track);
			}

			::-webkit-scrollbar-thumb {
				background-color: var(--scroll-thumb);
				border-radius: 10px;
			}

			/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä-—Ä–æ–¥–∏—Ç–µ–ª—å: —Ç–µ–ø–µ—Ä—å –æ–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º */
			.top-controls {
				position: absolute;
				top: 12px;
				right: 12px;
				display: flex !important;
				gap: 10px;
				z-index: 9999;
				/* –î–æ–±–∞–≤–∏–º –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω –ø–æ–¥ –∫–Ω–æ–ø–∫–∞–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ), 
				—á—Ç–æ–±—ã –æ–Ω–∏ –ª—É—á—à–µ —á–∏—Ç–∞–ª–∏—Å—å –Ω–∞ —Ñ–æ–Ω–µ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ */
				padding: 5px;
				border-radius: 20px;
			}

			/* –°–∞–º–∏ –∫–Ω–æ–ø–∫–∏ */
			.icon-button {
				all: unset; /* –°–±—Ä–æ—Å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Å—Ç–∏–ª–µ–π */
				background-color: #208cff;
				color: white;
				width: 34px;
				height: 34px;
				border-radius: 50%;
				display: flex;
				align-items: center;
				justify-content: center;
				cursor: pointer;
				font-size: 16px;
				transition: transform 0.1s, background-color 0.2s;
				box-shadow: 0 2px 4px rgba(0,0,0,0.2);
				/* –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –Ω–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–¥–µ—Å—å */
				position: relative !important; 
			}

			/* –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
			.icon-button:hover {
				background-color: #0066d6;
				transform: scale(1.05);
			}

			.icon-button:active {
				transform: translateY(0);
			}

			/* –ß—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∏ –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–∏ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è */
			.message.agent:first-child {
				padding-right: 80px; /* –†–µ–∑–µ—Ä–≤–∏—Ä—É–µ–º –º–µ—Å—Ç–æ –ø–æ–¥ –∫–Ω–æ–ø–∫–∏ –≤ –ø–µ—Ä–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ */
			}
			
			.message:first-child {
				margin-top: 0;
			}

			.message, #input-area, .thinking-container {
				transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
			}
		</style>
	</head>
	<body>
		<div class="top-controls">
			<button id="mute-toggle" class="icon-button" title="–û–∑–≤—É—á–∫–∞">üîä</button>
			
			<div class="theme-menu-container">
				<button id="theme-menu-btn" class="icon-button" title="–í—ã–±—Ä–∞—Ç—å —Ç–µ–º—É">üé®</button>
				<div id="theme-options" class="theme-options">
					<button class="theme-opt" data-theme="light" title="–°–≤–µ—Ç–ª–∞—è">‚òÄÔ∏è</button>
					<button class="theme-opt" data-theme="dark" title="–¢–µ–º–Ω–∞—è">üåô</button>
					<button class="theme-opt" data-theme="new-year" title="–ù–æ–≤—ã–π –ì–æ–¥">üéÑ</button>
					<button class="theme-opt" data-theme="march-8" title="8 –ú–∞—Ä—Ç–∞">üå∏</button>
					<button class="theme-opt" data-theme="feb-23" title="23 –§–µ–≤—Ä–∞–ª—è">üéñÔ∏è</button>
				</div>
			</div>
		</div>
		<div id="chat-container">
			<div class="message agent-message">
				–ü—Ä–∏–≤–µ—Ç! –Ø Sirius Agent. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ?
			</div>
		</div>

		<div id="input-area">
			<button id="mic-btn" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥">
				<svg viewBox="0 0 24 24">
					<path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 2.34 9 5v6c0 1.66 1.34 3 3 3z"/>
					<path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
				</svg>
			</button>

			<input
				type="text"
				id="prompt-input"
				placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–¥–∞—á—É..."
				autocomplete="off"
			/>
			
			<button id="stop-btn" title="–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å">
				<svg viewBox="0 0 24 24">
					<rect x="6" y="6" width="12" height="12"></rect>
				</svg>
			</button>
			
			<button id="send-btn">
				<svg viewBox="0 0 24 24">
					<path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
				</svg>
			</button>
		</div>

		<script src="marked.min.js"></script>
		<script src="sidepanel.js"></script>
	</body>
</html>